import { shallowMount, Wrapper } from '@vue/test-utils';
import { Map } from 'ol';

import { ChoroplethMapComponent, ChoroplethMapVue } from '@/primary/choropleth-map';
import { createMap, createVectorLayer } from '@/primary/webmapping/MapUtil';

let wrapper: Wrapper<ChoroplethMapComponent>;
let component: ChoroplethMapComponent;

let map: Map;

const wrap = () => {
  wrapper = shallowMount<ChoroplethMapComponent>(ChoroplethMapVue, {
    provide: { map: () => map, statesLayer: () => createVectorLayer() },
  });
  component = wrapper.vm;
};

describe('ChoroplethMap', () => {
  beforeEach(() => {
    map = createMap();
  });

  afterEach(() => {
    map.dispose();
  });

  it('should be a Vue instance', () => {
    wrap();
    expect(wrapper.isVueInstance()).toBeTruthy();
  });
});
